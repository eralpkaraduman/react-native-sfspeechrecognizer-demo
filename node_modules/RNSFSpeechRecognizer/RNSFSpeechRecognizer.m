//
//  RNSFSpeechRecognizer.m
//  RNSFSpeechRecognizer
//
//  Created by Eralp Karaduman on 6/18/17.
//  Copyright Â© 2017 Super Damage. All rights reserved.
//

#import "RNSFSpeechRecognizer.h"
#import "SpeechRecognitionManager.h"

@interface RNSFSpeechRecognizer ()
@property(nonatomic, strong) SpeechRecognitionManager *manager;
@end

@implementation RNSFSpeechRecognizer

-(instancetype)init {
    self = [super init];
    if (self) {
        self.manager = [[SpeechRecognitionManager alloc] init];
    }
    return self;
}

RCT_EXPORT_MODULE()

RCT_EXPORT_METHOD(isMicrophonePermissionGranted:(RCTResponseSenderBlock)callback) {
    NSNumber *granted = [NSNumber numberWithBool:_manager.isMicrophonePermissionGranted];
    callback(@[granted]);
}

RCT_EXPORT_METHOD(isMicrophonePermissionDenied:(RCTResponseSenderBlock)callback) {
    NSNumber *denied = [NSNumber numberWithBool:_manager.isMicrophonePermissionDenied];
    callback(@[denied]);
}

RCT_EXPORT_METHOD(requestMicrophonePermission:(RCTResponseSenderBlock)callback)
{
    [_manager requestMicrophonePermission:^(BOOL denied) {
        callback(@[[NSNumber numberWithBool:denied]]);
    }];
}

@end
