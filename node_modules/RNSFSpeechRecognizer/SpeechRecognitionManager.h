//
//  SpeechRecognitionManager.h
//  RNSFSpeechRecognizer
//
//  Created by Eralp Karaduman on 6/18/17.
//  Copyright Â© 2017 Super Damage. All rights reserved.
//

#import <Foundation/Foundation.h>

typedef NS_ENUM(NSInteger, SpeechRecognitionManagerStatus) {
    SpeechRecognitionManagerStatusIdle,
    SpeechRecognitionManagerStatusReady,
    SpeechRecognitionManagerStatusRecognizing,
    SpeechRecognitionManagerStatusUnavailable // coming from SFSpeechRecognizerDelegate
};

@protocol SDSpeechRecognitionManagerDelegate <NSObject>
@optional
- (void)manager:(_Nonnull id)manager
didChangeStatus:(SpeechRecognitionManagerStatus)status
     fromStatus:(SpeechRecognitionManagerStatus)fromStatus;
@end

@interface SpeechRecognitionManager : NSObject  // TODO: rename to SDSpeechRecognitionManager
@property (nonatomic, weak) _Nullable id <SDSpeechRecognitionManagerDelegate> delegate;
@property (nonatomic, assign) SpeechRecognitionManagerStatus status;
- (void)prepare;
- (void)start;
- (void)stop;

- (BOOL)isMicrophonePermissionGranted;
- (BOOL)isMicrophonePermissionDenied;
- (void)requestMicrophonePermission:(void (^ _Nonnull)(BOOL))callback;

- (BOOL)isSpeechRecognitionPermissionGranted;
- (BOOL)isSpeechRecognitionPermissionDenied;
- (void)requestSpeechRecognitionPermission:(void (^ _Nonnull)(BOOL))callback;
@end
